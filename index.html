<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›€è˜ã¯ã¡ã®ã“ | å…¬å¼ã‚µã‚¤ãƒˆ & ãƒ©ãƒ³ã‚­ãƒ³ã‚°</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Shippori+Mincho:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        midnight: '#020617',
                        surface: '#0f172a',
                        gold: '#fbbf24',
                        goldhover: '#d97706',
                        teal: '#14b8a6',
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                        serif: ['"Shippori Mincho"', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { margin: 0; overflow-x: hidden; background-color: #020617; }
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .glass-panel {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .page-content { display: none; opacity: 0; transition: opacity 0.3s ease; }
        .page-content.active { display: block; opacity: 1; animation: fadeIn 0.5s ease-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .gold-gradient-text {
            background: linear-gradient(to bottom right, #fbbf24, #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .tab-btn.active {
            background-color: #fbbf24;
            color: #020617;
        }
    </style>
</head>
<body class="text-slate-200 font-sans antialiased selection:bg-gold selection:text-midnight">

    <div id="canvas-container"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel border-b border-white/5">
        <div class="max-w-7xl mx-auto px-4 h-16 flex justify-between items-center">
            <button onclick="showPage('top')" class="font-serif text-2xl font-black tracking-tighter text-white hover:text-gold transition-colors">
                é›€è˜<span class="text-gold">ã¯ã¡ã®ã“</span>
            </button>
            <div class="hidden md:flex space-x-6 text-sm font-bold uppercase tracking-widest">
                <button onclick="showPage('rules-4')" class="hover:text-gold transition-colors">4äººæ‰“ã¡</button>
                <button onclick="showPage('rules-3')" class="hover:text-gold transition-colors">3äººæ‰“ã¡</button>
                <button onclick="showPage('points')" class="hover:text-gold transition-colors">ç‚¹æ•°è¡¨</button>
                <button onclick="showPage('ranking')" class="text-gold flex items-center gap-2 hover:text-white transition-colors">
                    <span class="animate-pulse">ğŸ†</span> ãƒ©ãƒ³ã‚­ãƒ³ã‚°
                </button>
            </div>
            <!-- Mobile Menu Icon (Simple) -->
            <button onclick="showPage('ranking')" class="md:hidden text-gold text-2xl">ğŸ†</button>
        </div>
    </nav>

    <!-- PAGE: TOP -->
    <div id="page-top" class="page-content active pt-32 pb-24">
        <div class="max-w-5xl mx-auto px-4 text-center">
            <h1 class="text-5xl md:text-8xl font-serif font-bold text-white mb-6 leading-tight">
                è‡³é«˜ã®ä¸€æ‰“ã€<br><span class="gold-gradient-text">æœ€é«˜ã®èˆå°ã§ã€‚</span>
            </h1>
            <p class="text-slate-400 text-lg md:text-xl mb-16 font-light">
                æœ€æ–°ã®æˆ¦ç¸¾ãƒ‡ãƒ¼ã‚¿ã¨å…¬å¼ãƒ«ãƒ¼ãƒ«ã¯ã“ã¡ã‚‰ã‹ã‚‰ã€‚
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <button onclick="showPage('ranking')" class="md:col-span-3 glass-panel p-8 rounded-3xl border border-gold/20 flex flex-col md:flex-row items-center justify-between hover:bg-gold/5 transition-all group">
                    <div class="flex items-center gap-6 mb-4 md:mb-0">
                        <span class="text-5xl">ğŸ‘‘</span>
                        <div class="text-left">
                            <h3 class="text-2xl font-bold text-gold">åº—å†…ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h3>
                            <p class="text-slate-400 text-sm">å¹´é–“æœ€é«˜å¾—ç‚¹ãƒ»ç·å¾—ç‚¹ã‚’ãƒã‚§ãƒƒã‚¯</p>
                        </div>
                    </div>
                    <span class="bg-gold text-midnight px-6 py-2 rounded-full font-black group-hover:scale-110 transition-transform shadow-lg shadow-gold/20">VIEW RANKING</span>
                </button>

                <button onclick="showPage('rules-4')" class="glass-panel p-10 rounded-3xl hover:border-gold/30 transition-all text-center group">
                    <span class="text-4xl block mb-4 group-hover:scale-110 transition-transform">ğŸ€„</span>
                    <h3 class="text-xl font-bold mb-2">å››äººæ‰“ã¡ãƒ«ãƒ¼ãƒ«</h3>
                    <p class="text-slate-500 text-xs">ã‚¢ãƒªã‚¢ãƒªãƒ»ãƒ†ãƒ³ãƒ‘ã‚¤é€£è˜</p>
                </button>

                <button onclick="showPage('rules-3')" class="glass-panel p-10 rounded-3xl hover:border-gold/30 transition-all text-center group">
                    <span class="text-4xl block mb-4 group-hover:scale-110 transition-transform">ğŸ€†</span>
                    <h3 class="text-xl font-bold mb-2">ä¸‰äººæ‰“ã¡ãƒ«ãƒ¼ãƒ«</h3>
                    <p class="text-slate-500 text-xs">æŠœããƒ‰ãƒ©ãƒ»è¬å­ãªã—</p>
                </button>

                <button onclick="showPage('points')" class="glass-panel p-10 rounded-3xl hover:border-gold/30 transition-all text-center group">
                    <span class="text-4xl block mb-4 group-hover:scale-110 transition-transform">ğŸ“Š</span>
                    <h3 class="text-xl font-bold mb-2">ç‚¹æ•°è¡¨ãƒ»å…±é€š</h3>
                    <p class="text-slate-500 text-xs">ç¬¦è¨ˆç®—ãƒ»åˆ‡ã‚Šä¸Šã’æº€è²«</p>
                </button>
            </div>
        </div>
    </div>

    <!-- PAGE: Ranking -->
    <div id="page-ranking" class="page-content pt-32 pb-24">
        <div class="max-w-5xl mx-auto px-4">
            <button onclick="showPage('top')" class="text-slate-500 hover:text-white mb-8 flex items-center gap-2 transition-colors">â† TOPã¸æˆ»ã‚‹</button>
            
            <div class="flex flex-col md:flex-row md:items-end justify-between gap-6 mb-12">
                <div>
                    <h2 class="text-4xl font-serif font-bold text-white mb-2">åº—å†…ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h2>
                    <p class="text-slate-500 text-sm">Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã—ã¦ã„ã¾ã™ã€‚</p>
                </div>
                <div class="flex bg-surface p-1 rounded-2xl border border-white/5">
                    <button id="btn-annual" onclick="fetchAndDisplay('annual')" class="px-6 py-3 rounded-xl text-sm font-bold transition-all bg-gold text-midnight">å¹´é–“æœ€é«˜å¾—ç‚¹</button>
                    <button id="btn-total" onclick="fetchAndDisplay('total')" class="px-6 py-3 rounded-xl text-sm font-bold transition-all text-slate-500 hover:text-white">ç·å¾—ç‚¹</button>
                </div>
            </div>

            <!-- Champion Card -->
            <div id="champion-card" class="mb-12 transition-opacity duration-500">
                <!-- Data will be injected here -->
                <div class="glass-panel p-12 rounded-[2rem] text-center animate-pulse">
                    <p class="text-slate-500">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </div>

            <div class="glass-panel rounded-3xl overflow-hidden shadow-2xl border border-white/5">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-white/5 text-slate-500 text-xs font-bold uppercase tracking-widest">
                            <th class="p-6 text-center w-20">Rank</th>
                            <th class="p-6">Name</th>
                            <th class="p-6 text-center w-32">Games</th>
                            <th class="p-6 text-right w-40">Score</th>
                        </tr>
                    </thead>
                    <tbody id="ranking-body" class="divide-y divide-white/5 text-lg">
                        <!-- Data will be injected here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- PAGE: Rules 4 (å››éº») -->
    <div id="page-rules-4" class="page-content pt-32 pb-24">
        <div class="max-w-4xl mx-auto px-4">
            <button onclick="showPage('top')" class="text-slate-500 hover:text-white mb-8 flex items-center gap-2 transition-colors">â† TOPã¸æˆ»ã‚‹</button>
            <h2 class="text-4xl font-serif font-bold text-white mb-8 border-b border-gold/30 pb-4 inline-block">å››äººæ‰“ã¡ãƒ«ãƒ¼ãƒ«</h2>
            
            <div class="space-y-6">
                <div class="glass-panel p-8 rounded-3xl border-l-4 border-gold">
                    <h3 class="text-xl font-bold text-gold mb-4">åŸºæœ¬ã‚·ã‚¹ãƒ†ãƒ </h3>
                    <ul class="list-disc list-inside space-y-3 text-slate-300">
                        <li><strong class="text-white">æŒã¡ç‚¹:</strong> 25,000ç‚¹æŒã¡ / 30,000ç‚¹è¿”ã—</li>
                        <li><strong class="text-white">ã‚¢ã‚¬ãƒª:</strong> å–°ã„ã‚¿ãƒ³ã‚ã‚Šã€å¾Œä»˜ã‘ã‚ã‚Šï¼ˆã‚¢ãƒªã‚¢ãƒªï¼‰</li>
                        <li><strong class="text-white">ãƒ‰ãƒ©:</strong> 5è¬ãƒ»5ç­’ãƒ»5ç´¢ã«å„1æšèµ¤ç‰Œã‚ã‚Šï¼ˆãƒ‰ãƒ©æ‰±ã„ï¼‰</li>
                        <li><strong class="text-white">é€£è˜:</strong> ãƒ†ãƒ³ãƒ‘ã‚¤é€£è˜</li>
                        <li><strong class="text-white">çµ‚äº†:</strong> ãƒ‰ãƒœãƒ³ï¼ˆãƒã‚³å‰²ã‚Œï¼‰çµ‚äº†ã‚ã‚Š</li>
                    </ul>
                </div>
                
                <div class="glass-panel p-8 rounded-3xl">
                    <h3 class="text-xl font-bold text-white mb-4">è©³ç´°ãƒ«ãƒ¼ãƒ«</h3>
                    <ul class="list-disc list-inside space-y-2 text-slate-400 text-sm">
                        <li>é€”ä¸­æµå±€ã‚ã‚Šï¼ˆä¹ç¨®ä¹ç‰Œã€å››é¢¨é€£æ‰“ã€å››é–‹æ§“ï¼‰</li>
                        <li>ãƒ€ãƒ–ãƒ­ãƒ³ã‚ã‚Šï¼ˆä¾›è¨—ã¯ä¸Šå®¶å–ã‚Šã€ç©æ£’ã¯è¦ªå–ã‚Šï¼‰</li>
                        <li>ã‚ªãƒ¼ãƒ©ã‚¹ã®è¦ªã®ã‚¢ã‚¬ãƒªæ­¢ã‚ã€ãƒ†ãƒ³ãƒ‘ã‚¤æ­¢ã‚ã‚ã‚Š</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE: Rules 3 (ä¸‰éº») -->
    <div id="page-rules-3" class="page-content pt-32 pb-24">
        <div class="max-w-4xl mx-auto px-4">
            <button onclick="showPage('top')" class="text-slate-500 hover:text-white mb-8 flex items-center gap-2 transition-colors">â† TOPã¸æˆ»ã‚‹</button>
            <h2 class="text-4xl font-serif font-bold text-white mb-8 border-b border-teal-500/50 pb-4 inline-block">ä¸‰äººæ‰“ã¡ãƒ«ãƒ¼ãƒ«</h2>
            
            <div class="space-y-6">
                <div class="glass-panel p-8 rounded-3xl border-l-4 border-teal-500">
                    <h3 class="text-xl font-bold text-teal-400 mb-4">ä¸‰éº»ç‰¹æœ‰ã‚·ã‚¹ãƒ†ãƒ </h3>
                    <ul class="list-disc list-inside space-y-3 text-slate-300">
                        <li><strong class="text-white">æŒã¡ç‚¹:</strong> 35,000ç‚¹æŒã¡ / 40,000ç‚¹è¿”ã—</li>
                        <li><strong class="text-white">ä½¿ç”¨ç‰Œ:</strong> è¬å­ã®2ã€œ8ã‚’é™¤ãç‰Œã‚’ä½¿ç”¨</li>
                        <li><strong class="text-white">åŒ—ç‰Œ:</strong> æŠœããƒ‰ãƒ©ã¨ã—ã¦ä½¿ç”¨ï¼ˆæ‰‹ç‰Œã§ä½¿ã†ã¨å½¹æº€ä»¥å¤–ã‚¢ã‚¬ã‚Œã¾ã›ã‚“ï¼‰</li>
                        <li><strong class="text-white">ãƒãƒ¼:</strong> ä¸å¯</li>
                        <li><strong class="text-white">ãƒ„ãƒ¢æ:</strong> ãªã—ï¼ˆæº€è²«ãƒ„ãƒ¢ã¯å­3000/è¦ª5000ã®æ”¯æ‰•ã„ã§ã¯ãªãã€ã¾ã‚‹ã¾ã‚‹è²°ãˆã¾ã™ â€»è¦ç¢ºèªï¼‰</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE: Points (ç‚¹æ•°è¡¨) -->
    <div id="page-points" class="page-content pt-32 pb-24">
        <div class="max-w-5xl mx-auto px-4">
            <button onclick="showPage('top')" class="text-slate-500 hover:text-white mb-8 flex items-center gap-2 transition-colors">â† TOPã¸æˆ»ã‚‹</button>
            <h2 class="text-4xl font-serif font-bold text-white mb-8">ç‚¹æ•°è¡¨ãƒ»ç¬¦è¨ˆç®—</h2>

            <div class="glass-panel p-6 rounded-2xl mb-8 flex items-center gap-4 bg-gold/5 border border-gold/20">
                <span class="text-3xl">ğŸ“¢</span>
                <div>
                    <p class="text-gold font-bold">åˆ‡ã‚Šä¸Šã’æº€è²«ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™</p>
                    <p class="text-xs text-slate-400">30ç¬¦4ç¿»ã€60ç¬¦3ç¿»ã¯æº€è²«ï¼ˆ8000/12000ï¼‰ã¨ãªã‚Šã¾ã™ã€‚</p>
                </div>
            </div>

            <!-- Tabs for Points -->
            <div class="flex gap-2 mb-4">
                <button onclick="switchScoreTab('parent')" id="btn-score-parent" class="tab-btn active flex-1 py-3 rounded-t-xl font-bold transition-all bg-gold text-midnight">è¦ªã®ç‚¹æ•°</button>
                <button onclick="switchScoreTab('child')" id="btn-score-child" class="tab-btn flex-1 py-3 glass-panel rounded-t-xl font-bold transition-all text-slate-400 hover:text-white">å­ã®ç‚¹æ•°</button>
            </div>

            <div class="glass-panel rounded-b-xl rounded-tr-xl overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-left min-w-[700px]">
                        <thead>
                            <tr class="bg-white/10 text-gold text-sm uppercase tracking-wider">
                                <th class="p-4">ç¿»æ•°</th>
                                <th class="p-4">å¹³å’Œ (20-30ç¬¦)</th>
                                <th class="p-4">ä¸ƒå¯¾å­ (25ç¬¦)</th>
                                <th class="p-4">é³´ã/é¢å‰ (30-40ç¬¦)</th>
                            </tr>
                        </thead>
                        <tbody id="score-table-body" class="divide-y divide-white/5 text-sm">
                            <!-- JS will load here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTU7AVMRhu_uQ9HD16LwlqLyKKmb6f-Yp7wa_YhemTekosvQztNZP9rYRVN4pGCyh4z9CxEk4rpgXm1/pub?gid=1117110911&single=true&output=csv";

        // --- PAGE NAVIGATION ---
        function showPage(pageId) {
            const target = document.getElementById('page-' + pageId);
            if (!target) {
                console.error(`Page element "page-${pageId}" not found.`);
                return;
            }

            document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
            target.classList.add('active');
            
            window.scrollTo({top: 0, behavior: 'smooth'});
            
            // ãƒšãƒ¼ã‚¸ã”ã¨ã®åˆæœŸåŒ–å‡¦ç†
            if(pageId === 'ranking') fetchAndDisplay('annual');
            if(pageId === 'points') switchScoreTab('parent');
        }

        // --- RANKING LOGIC ---
        async function fetchAndDisplay(mode) {
            const isAnnual = mode === 'annual';
            const btnAnnual = document.getElementById('btn-annual');
            const btnTotal = document.getElementById('btn-total');
            
            if (btnAnnual) btnAnnual.className = isAnnual ? "px-6 py-3 rounded-xl text-sm font-bold transition-all bg-gold text-midnight" : "px-6 py-3 rounded-xl text-sm font-bold transition-all text-slate-500 hover:text-white";
            if (btnTotal) btnTotal.className = !isAnnual ? "px-6 py-3 rounded-xl text-sm font-bold transition-all bg-gold text-midnight" : "px-6 py-3 rounded-xl text-sm font-bold transition-all text-slate-500 hover:text-white";

            try {
                const res = await fetch(CSV_URL);
                const text = await res.text();
                // ç©ºè¡Œã‚’é™¤å¤–ã—ã¦ãƒ‘ãƒ¼ã‚¹
                const rows = text.split('\n').filter(r => r.trim() !== '').slice(1).map(r => r.split(','));

                const data = rows.map(r => ({
                    rank: r[0]?.trim(),
                    name: r[1]?.trim(),
                    games: r[2]?.trim(),
                    annual: r[3]?.trim(),
                    total: r[4]?.trim()
                })).filter(d => d.name); // åå‰ãŒãªã„è¡Œã¯é™¤å¤–

                // Sort based on mode
                data.sort((a, b) => {
                    const valA = parseFloat((isAnnual ? a.annual : a.total).replace(/[^-0.9.]/g, '')) || 0;
                    const valB = parseFloat((isAnnual ? b.annual : b.total).replace(/[^-0.9.]/g, '')) || 0;
                    return valB - valA;
                });

                renderRanking(data, mode);
            } catch (e) {
                console.error("Fetch error", e);
                document.getElementById('champion-card').innerHTML = `<div class="p-8 text-center text-red-400">ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼: ${e.message}</div>`;
            }
        }

        function renderRanking(data, mode) {
            const isAnnual = mode === 'annual';
            const top = data[0];
            const champCard = document.getElementById('champion-card');
            const rankBody = document.getElementById('ranking-body');
            
            if (champCard && top) {
                champCard.innerHTML = `
                    <div class="glass-panel p-10 rounded-[2.5rem] border border-gold/30 relative overflow-hidden group">
                        <div class="absolute -top-10 -right-10 opacity-10 text-[12rem] group-hover:scale-110 transition-transform duration-700">ğŸ€„</div>
                        <div class="relative z-10 flex flex-col md:flex-row items-center justify-between gap-8">
                            <div class="text-center md:text-left">
                                <span class="inline-block px-4 py-1 rounded-full bg-gold/20 text-gold text-[10px] font-black tracking-widest uppercase mb-4 border border-gold/50">Current Record Holder</span>
                                <h3 class="text-6xl md:text-8xl font-serif font-black text-white">${top.name}</h3>
                                <p class="text-slate-500 mt-2 font-bold flex items-center justify-center md:justify-start gap-2">
                                    <span>${top.games} Games</span>
                                    <span class="w-1 h-1 rounded-full bg-slate-600"></span>
                                    <span>Rank 1</span>
                                </p>
                            </div>
                            <div class="text-center md:text-right">
                                <div class="text-7xl md:text-9xl font-black text-gold tracking-tighter tabular-nums drop-shadow-2xl">${isAnnual ? top.annual : top.total}</div>
                                <div class="text-slate-500 text-xs font-black tracking-[0.3em] uppercase mt-2">${isAnnual ? 'Annual High Score' : 'Lifetime Total Score'}</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            if (rankBody) {
                rankBody.innerHTML = data.map((p, i) => `
                    <tr class="hover:bg-white/5 transition-colors group">
                        <td class="p-6 text-center">
                            <span class="text-2xl font-black italic ${i === 0 ? 'text-gold' : i === 1 ? 'text-slate-300' : i === 2 ? 'text-orange-700' : 'text-slate-700'}">${i + 1}</span>
                        </td>
                        <td class="p-6 font-bold text-white text-xl group-hover:text-gold transition-colors">${p.name}</td>
                        <td class="p-6 text-center text-slate-500 font-medium">${p.games}</td>
                        <td class="p-6 text-right font-black text-3xl text-gold tabular-nums">${isAnnual ? p.annual : p.total}</td>
                    </tr>
                `).join('');
            }
        }

        // --- SCORE TABLE LOGIC ---
        const scoreData = {
            parent: [
                ["1ç¿»", "1,500 / -", "-", "2,000 / 700ã‚ªãƒ¼ãƒ«"],
                ["2ç¿»", "2,900 / 1,000ã‚ªãƒ¼ãƒ«", "2,400 / 800ã‚ªãƒ¼ãƒ«", "3,900 / 1,300ã‚ªãƒ¼ãƒ«"],
                ["3ç¿»", "5,800 / 2,000ã‚ªãƒ¼ãƒ«", "4,800 / 1,600ã‚ªãƒ¼ãƒ«", "7,700 / 2,600ã‚ªãƒ¼ãƒ«"],
                ["4ç¿»", "11,600 (12,000) / 4,000ã‚ªãƒ¼ãƒ«", "9,600 / 3,200ã‚ªãƒ¼ãƒ«", "11,600 (12,000) / 4,000ã‚ªãƒ¼ãƒ«"],
                ["æº€è²«", "12,000 / 4,000ã‚ªãƒ¼ãƒ«", "12,000 / 4,000ã‚ªãƒ¼ãƒ«", "12,000 / 4,000ã‚ªãƒ¼ãƒ«"],
                ["è·³æº€", "18,000 / 6,000ã‚ªãƒ¼ãƒ«", "18,000 / 6,000ã‚ªãƒ¼ãƒ«", "18,000 / 6,000ã‚ªãƒ¼ãƒ«"]
            ],
            child: [
                ["1ç¿»", "1,000 / -", "-", "1,300 / 300ãƒ»500"],
                ["2ç¿»", "2,000 / 400ãƒ»700", "1,600 / 400ãƒ»800", "2,600 / 700ãƒ»1,300"],
                ["3ç¿»", "3,900 / 1,000ãƒ»2,000", "3,200 / 800ãƒ»1,600", "5,200 / 1,300ãƒ»2,600"],
                ["4ç¿»", "7,700 (8,000) / 2,000ãƒ»4,000", "6,400 / 1,600ãƒ»3,200", "7,700 (8,000) / 2,000ãƒ»4,000"],
                ["æº€è²«", "8,000 / 2,000ãƒ»4,000", "8,000 / 2,000ãƒ»4,000", "8,000 / 2,000ãƒ»4,000"],
                ["è·³æº€", "12,000 / 3,000ãƒ»6,000", "12,000 / 3,000ãƒ»6,000", "12,000 / 3,000ãƒ»6,000"]
            ]
        };

        function switchScoreTab(type) {
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('active', 'bg-gold', 'text-midnight');
                b.classList.add('glass-panel', 'text-slate-400');
            });
            const btn = document.getElementById('btn-score-' + type);
            if(btn) {
                btn.classList.add('active', 'bg-gold', 'text-midnight');
                btn.classList.remove('glass-panel', 'text-slate-400');
            }

            const tbody = document.getElementById('score-table-body');
            if(tbody) {
                tbody.innerHTML = scoreData[type].map(row => `
                    <tr class="hover:bg-white/5 transition-colors">
                        <td class="p-4 font-bold text-gold">${row[0]}</td>
                        <td class="p-4 text-white">${row[1]}</td>
                        <td class="p-4 text-slate-400">${row[2]}</td>
                        <td class="p-4 text-slate-400">${row[3]}</td>
                    </tr>
                `).join('');
            }
        }

        // --- THREE.JS BACKGROUND ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const geometry = new THREE.BoxGeometry(1.2, 1.6, 0.7);
        const tiles = [];
        for (let i = 0; i < 15; i++) {
            const material = new THREE.MeshStandardMaterial({ 
                color: i % 3 === 0 ? 0xffffff : (i % 3 === 1 ? 0x1e293b : 0xfbbf24),
                roughness: 0.2,
                metalness: 0.1
            });
            const tile = new THREE.Mesh(geometry, material);
            tile.position.set((Math.random()-0.5)*40, (Math.random()-0.5)*40, (Math.random()-0.5)*15);
            tile.rotation.set(Math.random()*Math.PI, Math.random()*Math.PI, 0);
            scene.add(tile);
            tiles.push({ mesh: tile, rs: Math.random()*0.01 });
        }
        
        const light = new THREE.PointLight(0xffffff, 1);
        light.position.set(10, 10, 10);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0xffffff, 0.6));
        camera.position.z = 15;

        function animate() {
            requestAnimationFrame(animate);
            tiles.forEach(t => {
                t.mesh.rotation.x += t.rs;
                t.mesh.rotation.y += t.rs;
                t.mesh.position.y -= 0.01;
                if(t.mesh.position.y < -20) t.mesh.position.y = 20;
            });
            renderer.render(scene, camera);
        }
        window.onload = animate;
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>